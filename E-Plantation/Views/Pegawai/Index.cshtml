
@{
    ViewBag.Title = "Pegawai";
    ViewBag.Root = "Master";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="pagetitle">
    <h1>Master Pegawai</h1>
    <nav>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#">Master</a></li>
            <li class="breadcrumb-item active">Master Pegawai</li>
        </ol>
    </nav>
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="card info-card  ">

            <div class="card-body" id="divData">
                <div class="row mb-2">
                    
                    <div class="col-lg-6 text-end">
                        <button class="btn  btn-success btn-sm" id="btnExportExcel" type="button"><i class="bi bi-file-earmark-excel-fill"></i> Export </button>
                    </div>
                </div>
                <div class="row pt-3">
                    <div class="col-lg-12">
                        <table id="tableID" class="table table-striped table-bordered" style="width:100% ;font-family:'Calibri';">
                            <thead>
                                <tr role="row">

                                    <th style="text-align:center;">
                                        NIK
                                    </th>
                                    <th style="text-align:center;">
                                        Nama
                                    </th>
                                    <th style="text-align:center;">
                                        Level
                                    </th>
                                    <th style="text-align:center;">
                                        Departemen
                                    </th>
                                    <th style="text-align:center;">
                                        Jabatan
                                    </th>
                                    <th style="text-align:center;">
                                        Tgl Masuk
                                    </th>
                                </tr>
                            </thead>

                            <tbody></tbody>
                        </table>
                    </div>
                </div>
               
            </div> 
        </div>
    </div>
</div>
 
<style>
    div.dataTables_info {
        padding-top: 9px;
        font-size: 13px;
        font-weight: 700;
        font-style: italic;
        color: #969696;
    }

    a.page-link {
        font-size: 13px;
        font-weight: 600;
        margin-top: 5px;
    }
</style>
<script>
    var Table;
    let CurrTahun = new Date().getFullYear();
    $(document).ready(function () {

        loadData();
        

         $("#tableID").dataTable({
            bDestroy: true,
            data: [],
            columns: [
                { "data": "NIK", className: "text-center" },
                { "data": "NamaLengkap", className: "text-center" },
                { "data": "LevelName", className: "text-center" },
                { "data": "DepartmentName", className: "text-center" },
                { "data": "PositionName", className: "text-center" },
                { "data": "TglMasuk", className: "text-center" },
              
            ],

            //rowCallback: function (row, data) { responsiveHelper_dt_basic.createExpandIcon(row) },
            filter: true,
            info: true,
            ordering: true,
            //processing: true,
            //retrieve: true,
            bLengthChange: false,
            //lengthMenu: [[15, 20, -1], [15, 20, "All"]],
            //bFilter: true,
            //bSort: true,
            //bPaginate: true,
            //scrollX: true,
            //scrollX: "100%",
            searching:false,
            //autoWidth: true,
            pageLength:12,
            //preDrawCallback: function () {
            //    // Initialize the responsive datatables helper once.
            //    if (!responsiveHelper_dt_basic) {
            //        responsiveHelper_dt_basic = new ResponsiveDatatablesHelper($('#tableID'), breakpointDefinition);
            //    }
            //},
            //drawCallback: function (oSettings) {
            //    responsiveHelper_dt_basic.respond();
            //}
         });

        function loadData() {
               $.ajax({
                url: '@Url.Action("GetList","Pegawai")',
                type: "GET", 
            }).done(function (result) { 
                $("#tableID").DataTable().clear();
                $("#tableID").DataTable().rows.add(result).draw(false);
                $("#tableID").DataTable().columns.adjust().draw();
            }).fail(function (jqXHR, textStatus, errorThrown) {
                // needs to implement if it fails
            });
        }
         
    });
     

</script>